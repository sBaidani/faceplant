<!DOCTYPE html>
<html>
<head>
    <title>Faceplant</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script src="emotion.js"></script>
    <script src="http://jcrop-cdn.tapmodo.com/v0.9.12/js/jquery.Jcrop.min.js"></script>
    <link rel="stylesheet" href="http://jcrop-cdn.tapmodo.com/v0.9.12/css/jquery.Jcrop.css" type="text/css" />
    <link rel="stylesheet" href="main.css" type="text/css" />
</head>

<div id="left"></div>

<div id="right"></div>

<body>

<script type="text/javascript">
    var links = ["https://upload.wikimedia.org/wikipedia/commons/thumb/e/ec/Mona_Lisa%2C_by_Leonardo_da_Vinci%2C_from_C2RMF_retouched.jpg/687px-Mona_Lisa%2C_by_Leonardo_da_Vinci%2C_from_C2RMF_retouched.jpg",
                    "http://www.poleznoe.ru/large/201203/7946.jpg"]
    var datapoints = [];
    $(function() {
        var params = {
            // Request parameters
            "returnFaceId": "true",
            "returnFaceLandmarks": "true",
            "returnFaceAttributes": "headPose,emotion",
        };
        
        $.ajax({
            url: "https://northeurope.api.cognitive.microsoft.com/face/v1.0/detect?" + $.param(params),
            beforeSend: function(xhrObj){
                // Request headers
                xhrObj.setRequestHeader("Content-Type","application/json");
                xhrObj.setRequestHeader("Ocp-Apim-Subscription-Key","c4a1b7187b0848b48872ba48ee008340");
            },
            type: "POST",
            // Request body
            data: '{"url": "' + links[0] + '"}',
        })
        .done(function(data) {
            console.log(data);
            emotions = data[0].faceAttributes.emotion;
            datapoints[0] = data[0].faceRectangle.left;
            datapoints[1] = data[0].faceRectangle.top;
            datapoints[2] = data[0].faceRectangle.width;
            datapoints[3] = data[0].faceRectangle.height;
            document.getElementById("left").innerHTML = "<img src=\"" + links[0] + "\">"
            document.getElementById("right").innerHTML = "<img src=\"" + links[1] + "\">"
        })
        .fail(function(err) {
            alert("Error: " + JSON.stringify(err));
        });
        // console.log(faceLandmarks);
        // console.log(faceAttributes);
        // console.log(faceRectangle);
    });
    </script>
    <script type=text/javascript>
    
    jQuery(function($)){
    
        $('#right').Jcrop();
            setSelect: [datapoints[0], datapoints[1], datapoints[2], datapoints[3]],
            canSelect: false,
            canResize: false,
            canDrag: false,
            
    };
</script>
</body>
</html>
